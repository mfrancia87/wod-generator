<!DOCTYPE html>
<html lang="en">
<head>
	<title>WOD Generator</title>
	<meta charset="utf-8"> 
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</head>
<body class="container">
	<h5>Timer con {{title}}</h5>
	<div class="row">
		<div class="col-sm-8" style="text-align: center;">
			<button id="EMOMtimer" type="button" class="btn btn-info" style="width: 60%; margin: 5px auto;">EMOM</button>
			<button id="regularTimer" type="button" class="btn btn-info" style="width: 60%; margin: 5px auto;">For Time</button>
			
			
				<div id="timerForm" class="form-group" style="display: none;">
					<form class="container">
						<div class="form-check form-check-inline">
						  <label class="form-check-label">
						    <input class="form-check-input" type="radio" name="counter" id="countUp" value="up"> Count Up
						  </label>
						</div>
						<div class="form-check form-check-inline">
						  <label class="form-check-label">
						    <input class="form-check-input" type="radio" name="counter" id="countDown" value="down"> Count Down
						  </label>
						</div>

						<div class="form-group row">
							<label class="col-xs-6 col-form-label" for="min">Minutes:</label>
							<div class="col-xs-6">
								<input type="number" class="form-control" id="min">
							</div>
						</div>

  						<div class="form-group row">
  							<button id="startBtn" type="button" class="btn btn-info float-left" style="width: 40%;">START</button>
  						
							<button id="stopBtn" type="button" class="btn btn-danger float-right" style="width: 40%;">STOP</button>
  						</div>
						
					</form>
				</div>

			<div id="timerScreen" style="width: 60%; height: 40px; margin: 5px auto; border: 1px solid black; display: none;">00:00</div>
		</div>
	</div>
	<script type="text/javascript">

		var countup, countdown;

		function startTimerUp(totalMinutes, display) {
		    var seconds = 0, minutes = "00";

		    countup = setInterval(function () {
		    	++seconds;
				if(seconds >= 60){
					minutes++;
					seconds = 0;
				}
		        seconds = seconds < 10 ? "0" + seconds : seconds;
		        display.textContent = minutes + ":" + seconds;
		        
		        if (parseInt(minutes, 10) == totalMinutes) {
		            clearInterval(countup);
		        }
		    }, 1000);
		}

		function startTimerDown(minutes, display) {
		    var seconds = "00";
		    minutes = minutes < 10 ? "0" + minutes : minutes;

		    countdown = setInterval(function () {
		        display.textContent = minutes + ":" + seconds;
		        if(seconds <= 0){
		        	if(parseInt(minutes) == 0){
		        		display.textContent = "00:00";
		        		clearInterval(countdown);
		        	}

		        	seconds = 59;
		        	minutes--;
		        	minutes = minutes < 10 ? "0" + minutes : minutes;
		        	
		        }	
		    	
				seconds--;
				seconds = seconds < 10 ? "0" + seconds : seconds;
		    }, 1000);
		}

		document.getElementById('EMOMtimer').addEventListener('click', function(){
			document.getElementById('timerForm').style.display = 'block';
		});

		document.getElementById('startBtn').addEventListener('click', function(){

			document.getElementById('timerScreen').style.display = 'block';
			var minutes = document.getElementById('min').value;

			//clear timer
			var timerScreen = document.getElementById('timerScreen');
			timerScreen.innerHTML = '';

			if (document.getElementById('countUp').checked) {
			  startTimerUp(minutes, timerScreen);
			}
			if (document.getElementById('countDown').checked) {
			  startTimerDown(minutes, timerScreen);
			}
			
		});

		document.getElementById('stopBtn').addEventListener('click', function(){
			clearInterval(countup);
			clearInterval(countdown);
			document.getElementById('timerScreen').innerHTML = '00:00';
		});

			

	</script>
</body>
</html>